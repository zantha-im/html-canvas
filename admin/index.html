<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Canvas - Admin UI</title>
    <link rel="icon" type="image/x-icon" href="../public/favicon.ico">
    <link rel="apple-touch-icon" href="../public/site-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        .nav-item {
            @apply px-4 py-3 rounded-lg font-medium cursor-pointer transition-all border-l-4 border-transparent;
        }
        .nav-item.active {
            @apply bg-blue-600 text-white border-l-blue-400;
        }
        .nav-item.inactive {
            @apply text-gray-400 hover:bg-gray-800 hover:text-gray-200;
        }
        .snippet-container {
            @apply bg-gray-900 rounded-lg p-4 overflow-x-auto;
        }
        .copy-btn {
            @apply absolute top-2 right-2 bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors;
        }
        .copy-success {
            @apply bg-green-600;
        }
        .snippet-wrapper {
            @apply relative;
        }
        pre {
            @apply m-0 text-sm;
        }
        code {
            @apply text-gray-100;
        }
        .sidebar {
            @apply w-64 bg-gray-900 border-r border-gray-800 flex flex-col;
        }
        .sidebar-header {
            @apply px-6 py-6 border-b border-gray-800;
        }
        .sidebar-nav {
            @apply flex-1 overflow-y-auto px-4 py-6;
        }
        .sidebar-footer {
            @apply px-6 py-4 border-t border-gray-800 text-xs text-gray-500;
        }
        .content-area {
            @apply flex-1 overflow-y-auto;
        }
        .section-group {
            @apply mb-6;
        }
        .section-title {
            @apply text-xs uppercase font-semibold text-gray-500 px-4 py-2 tracking-wider;
        }
        @media (max-width: 768px) {
            .sidebar {
                @apply w-full;
            }
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-100">
    <div class="flex h-screen flex-col">
        <!-- Header -->
        <header class="bg-gray-900 border-b border-gray-800 px-6 py-4">
            <h1 class="text-2xl font-bold text-white">HTML Canvas</h1>
            <p class="text-gray-400 text-sm mt-1">Static HTML snippet generator for Shopify</p>
        </header>

        <!-- Main Content Area -->
        <div class="flex flex-1 overflow-hidden">
            <!-- Left Sidebar Navigation -->
            <nav class="sidebar">
                <div class="sidebar-header">
                    <h2 class="text-sm font-semibold text-gray-300">Content Types</h2>
                </div>

                <div class="sidebar-nav">
                    <!-- Announcements Section -->
                    <div class="section-group">
                        <div class="section-title">Announcements</div>
                        <button class="nav-item active w-full text-left" data-type="announcements" data-view="main">
                            <span class="text-lg">ðŸ“„</span> Main Page
                        </button>
                        <button class="nav-item inactive w-full text-left" data-type="announcements" data-view="template" data-template="standard">
                            <span class="text-lg">ðŸ“‹</span> Standard Template
                        </button>
                        <button class="nav-item inactive w-full text-left" data-type="announcements" data-view="template" data-template="product-update">
                            <span class="text-lg">ðŸ“‹</span> Product Update
                        </button>
                        <button class="nav-item inactive w-full text-left" data-type="announcements" data-view="template" data-template="shipping-alert">
                            <span class="text-lg">ðŸ“‹</span> Shipping Alert
                        </button>
                    </div>

                    <!-- Extended Product Section -->
                    <div class="section-group">
                        <div class="section-title">Extended Product</div>
                        <button class="nav-item inactive w-full text-left" data-type="extended-product" data-view="main">
                            <span class="text-lg">ðŸ“„</span> Main Page
                        </button>
                        <button class="nav-item inactive w-full text-left" data-type="extended-product" data-view="template" data-template="product-gallery">
                            <span class="text-lg">ðŸ“‹</span> Gallery Component
                        </button>
                        <button class="nav-item inactive w-full text-left" data-type="extended-product" data-view="template" data-template="product-specs">
                            <span class="text-lg">ðŸ“‹</span> Specs Component
                        </button>
                        <button class="nav-item inactive w-full text-left" data-type="extended-product" data-view="template" data-template="product-testimonials">
                            <span class="text-lg">ðŸ“‹</span> Testimonials
                        </button>
                    </div>
                </div>

                <div class="sidebar-footer">
                    <p>v1.0 â€¢ <a href="https://github.com/zantha-im/html-canvas" class="text-blue-400 hover:text-blue-300">GitHub</a></p>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="content-area flex-1 p-8">
                <!-- Content Header -->
                <div class="mb-8">
                    <h2 id="content-title" class="text-3xl font-bold mb-2">Announcements Main Page</h2>
                    <p id="content-description" class="text-gray-400">Dynamic announcement pages with color-coded banners, responsive design, and anchor navigation.</p>
                </div>

                <!-- Snippet Display Area -->
                <div class="snippet-wrapper">
                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy to Clipboard</button>
                    <div class="snippet-container">
                        <pre><code class="language-html" id="snippet-code"></code></pre>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Content descriptions
        const contentDescriptions = {
            'announcements-main': {
                title: 'Announcements Main Page',
                description: 'Dynamic announcement pages with color-coded banners, responsive design, and anchor navigation.'
            },
            'announcements-standard': {
                title: 'Standard Announcement Template',
                description: 'Basic announcement template for quick additions to your announcements page.'
            },
            'announcements-product-update': {
                title: 'Product Update Template',
                description: 'Specialized announcement template for product-focused updates and releases.'
            },
            'announcements-shipping-alert': {
                title: 'Shipping Alert Template',
                description: 'Template for shipping, logistics, and service-related announcements.'
            },
            'extended-product-main': {
                title: 'Extended Product Main Page',
                description: 'Rich product showcase with gallery, specifications, features, and customer testimonials.'
            },
            'extended-product-product-gallery': {
                title: 'Product Gallery Component',
                description: 'Multi-image gallery with thumbnail navigation for product showcase.'
            },
            'extended-product-product-specs': {
                title: 'Product Specifications Component',
                description: 'Responsive specifications grid for displaying product details.'
            },
            'extended-product-product-testimonials': {
                title: 'Product Testimonials Component',
                description: 'Customer review cards with ratings and testimonial text.'
            }
        };

        // Navigation item click handler
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', async () => {
                const contentType = item.dataset.type;
                const view = item.dataset.view;
                const template = item.dataset.template;
                
                // Update active state
                document.querySelectorAll('.nav-item').forEach(i => {
                    i.classList.remove('active');
                    i.classList.add('inactive');
                });
                item.classList.remove('inactive');
                item.classList.add('active');
                
                // Determine file path
                let filePath;
                let descKey;
                
                if (view === 'main') {
                    filePath = `../content-types/${contentType}/page.html`;
                    descKey = `${contentType}-main`;
                } else {
                    filePath = `../content-types/${contentType}/templates/${template}.html`;
                    descKey = `${contentType}-${template}`;
                }
                
                try {
                    const response = await fetch(filePath);
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    
                    const html = await response.text();
                    const codeElement = document.getElementById('snippet-code');
                    codeElement.textContent = html;
                    hljs.highlightElement(codeElement);
                    
                    // Update header
                    const desc = contentDescriptions[descKey];
                    document.getElementById('content-title').textContent = desc.title;
                    document.getElementById('content-description').textContent = desc.description;
                    
                } catch (error) {
                    document.getElementById('snippet-code').textContent = `Error loading snippet: ${error.message}`;
                }
            });
        });

        // Load initial snippet
        document.querySelector('[data-type="announcements"][data-view="main"]').click();

        // Copy to clipboard
        function copyToClipboard(btn) {
            const codeElement = document.getElementById('snippet-code');
            const text = codeElement.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btn.textContent;
                btn.textContent = 'âœ“ Copied!';
                btn.classList.add('copy-success');
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copy-success');
                }, 2000);
            }).catch(err => {
                alert('Failed to copy: ' + err);
            });
        }
    </script>
</body>
</html>
